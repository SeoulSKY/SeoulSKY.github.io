const d=e=>typeof e=="function";function h(e,c){return typeof e=="string"?e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}const v={any:0,all:1};function b(e,c,{root:a,margin:l,amount:t="any"}={}){if(typeof IntersectionObserver>"u")return()=>{};const u=h(e),o=new WeakMap,g=s=>{s.forEach(n=>{const i=o.get(n.target);if(n.isIntersecting!==!!i)if(n.isIntersecting){const f=c(n);d(f)?o.set(n.target,f):r.unobserve(n.target)}else i&&(i(n),o.delete(n.target))})},r=new IntersectionObserver(g,{root:a,rootMargin:l,threshold:typeof t=="number"?t:v[t]});return u.forEach(s=>r.observe(s)),()=>r.disconnect()}export{b as i};
